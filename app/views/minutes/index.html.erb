<div class="card shadow mb-4">
	<div class="card-header py-3">
		<div class="row">
			<div class="col-md-3 col-sm-12">
				<h2 class="font-weight-bold text-primary">Minutes</h2>
			</div>
			<div class="col-md-6 col-sm-12">
				<%=form_tag minutes_path, method: :get, class: "" do %>
				  <div class="input-group">
				    <%= text_field_tag :search, params[:search], class: "form-control", placeholder: "Search for minutes title..." %>
				    <span class="input-group-append">
				      <%= button_tag(type: 'submit', id: "search-btn", class: "btn btn-primary") do %>
				        <i class="fas fa-search fa-sm"></i>
				      <% end %>
				    </span>
				  </div>
				<% end %>
			</div>
			<div class="col-md-3 col-sm-12">
				<%= link_to "New Minute", new_minute_path, class: "btn btn-primary btn-sm float-right", remote: true, data: { toggle: "modal", target: '#remote-modal', backdrop: 'static', keyboard: false } if current_user_admin? %>
			</div>
		</div>
	</div>
	<div class="card-body">
		<%=form_tag minutes_path, id: "filterForm", method: :get do %>
			<div class="row">
				<div class="col-md-3">
					<%= select_tag :minute_type, options_for_select(Minute.minute_types.keys.map{|m| [m.titleize, m]}, params[:minute_type]), class: "form-control", prompt: "Select Category" %>
				</div>
				<div class="col-md-3">
					<%= text_field_tag :from_date, params[:from_date], :class => 'fDate form-control border-input', :placeholder => "From " %>
				</div>
				<div class="col-md-3">
					<%= text_field_tag :to_date, params[:to_date], :class => 'tDate form-control border-input', :placeholder => "To " %>
			  </div>
			  <div class="col-md-1 mt-2">
			  	<%= link_to minutes_path do %>
			  		<span class='fa fa-undo float-right'></span>
			  	<% end %>
			  </div>
			  <div class="col-md-2">
			  	<%= button_tag "Filter", class: "btn btn-success float-right" %>
			  </div>
			</div>
		<% end %>
		<p class="text-muted my-2">Records Count: <%= @results.count %></p>
		<div class="table-responsive">
      <div id="dataTable_wrapper" class="dataTables_wrapper dt-bootstrap4">
      	<table class="table">
	      	<thead>
	        	<tr>
	        		<td>Date</td>
	        		<td>Title</td>
	        		<td>Type</td>
	        	</tr>
	        </thead>
	        <tbody>
	        	<% @minutes.each do |minute| %>
		        	<tr>
		        		<td>
		        			<%= minute.date.strftime("%B %e, %Y") %>
		        		</td>
		        		<td class="col-md-8">
		        			<%= link_to highlight(minute.title, params[:search]), minute_path(minute) %>
		        		</td>
		        		<td><%= minute.minute_type.titleize %></td>
		        	</tr>
		        <% end %>
	        </tbody>
	      </table>
	      <center><%= paginate @minutes, :window => 1 %></center>
      </div>
    </div>
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function() {
    $('.fDate').flatpickr({
      altInput: true,
      altFormat: "F j, Y",
      dateFormat: "Y-m-d"
    });
    $('.tDate').flatpickr({
      altInput: true,
      altFormat: "F j, Y",
      dateFormat: "Y-m-d"
    });
  });
</script>