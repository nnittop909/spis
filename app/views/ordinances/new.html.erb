<div class="card">
  <div class="card-header">
    <div class="row">
      <div class="col-md-6">
        <h4 class="">New Ordinance</h4>
      </div>
      <div class="col-md-6">
        <%= link_to ordinances_path do %>
          <h5 class="float-right fa fa-times pt-1"></h5>
        <% end %>
      </div>
    </div>
  </div>
  <div class="card-body">
    <%= simple_form_for @ordinance, html: { autocomplete: "off"}, url: ordinances_path, method: :post do |f| %>
      <%= f.error_notification %>
      <div class="row">
        <div class="col-md-6">
          <%= f.input :number %>
        </div>
        <div class="col-md-6">
          <%= f.input :date, as: :string, label: "Date Calendared", placeholder: "Select date...", input_html: { class: "datepicker" } %>
        </div>
      </div>
      <%= f.input :title, as: :text %>
      <div class="row">
        <div class="col-md-6">
          <%= f.input :category_id, collection: Category.all.map{ |a| [a, a.id]}, selected: 2 %>
        </div>
        <div class="col-md-6">
          <%= f.input :stage_id, collection: Stage.for_ordinances.map{|s| [s.name, s.id]}, input_html: {}, selected: 7 %>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <%= f.input :date_approved, as: :string, label: "Date Approved", placeholder: "Select date...", input_html: { class: "datepicker dateApproved" } %>
        </div>
        <div class="col-md-6">
          <%= f.input :effectivity_date, as: :string, label: "Date Enacted", placeholder: "Select date...", input_html: { class: "datepicker effectDate" } %>
          <%= f.input :same_as_date_approved, as: :boolean, input_html: {class: "pb-0 sameAsApproved"} %>
        </div>
      </div>
      <%= f.input :remarks, as: :text %>
      <%= f.submit "Save", class: "btn btn-outline-success float-right", data: { disable_with: "Processing..." } %>
    <% end %>

    <script type="text/javascript">
      $(document).ready(function() {
        var defDate = new Date(<%= Date.today.strftime("%Y, %m-1, %d") %>);
        $('.datepicker').flatpickr({
          altInput: true,
          altFormat: "F j, Y",
          dateFormat: "Y-m-d",
          defaultDate: defDate
        });
      });
      $(function() {
        $('.sameAsApproved').change(function(){
          if ($(this).is(':checked')) {
            $('.effectDate').hide();
          } else {
            $('.effectDate').show();
          }
        });
      });
    </script>
  </div>
</div>
