<div class="card shadow mb-4">
	<div class="card-header py-3">
		<div class="row">
			<div class="col-md-3 col-sm-12">
				<h2 class="font-weight-bold text-primary">Ordinances</h2>
			</div>
			<div class="col-md-6 col-sm-12">
				<%=form_tag ordinances_path, method: :get, class: "" do %>
				  <div class="input-group">
				    <%= text_field_tag :search, params[:search], class: "form-control", placeholder: "Search for ordinance number or title..." %>
				    <span class="input-group-append">
				      <%= button_tag(type: 'submit', id: "search-btn", class: "btn btn-primary") do %>
				        <i class="fas fa-search fa-sm"></i>
				      <% end %>
				    </span>
				  </div>
				<% end %>
			</div>
			<div class="col-md-3 col-sm-12">
				<%= link_to "New Ordinance", new_ordinance_path, class: "btn btn-primary btn-sm float-right" if current_user_admin? %>
			</div>
		</div>
	</div>
	<div class="card-body">
		<div class="row">
			<div class="col-md-12">
				<%=form_tag ordinances_path, method: :get do %>
				  <div class="input-group w-25">
				    <%= select_tag :year, options_for_select([*1960.to_s..Date.today.year.to_s].reverse, params[:year]), class: "form-control", prompt: "Select Year", onchange: 'this.form.submit();' %>
				  </div>
				<% end %>
				<p class="text-muted my-2">Records Count: <%= @results.count %></p>
			</div>
		</div>
		<div class="table-responsive">
      <div id="dataTable_wrapper" class="dataTables_wrapper dt-bootstrap4">
      	<table class="table">
	      	<thead>
	        	<tr>
	        		<td>Number</td>
	        		<td>Title</td>
	        		<td>Date Approved</td>
	        	</tr>
	        </thead>
	        <tbody>
	        	<% @ordinances.each do |ordinance| %>
		        	<tr>
		        		<td>
		        			<%= highlight(ordinance.number, params[:search]) %>
		        			<br>
		        			<small class="badge bg-info"><%= ordinance.current_stage.titleize if ordinance.current_stage.present? %></small>
		        		</td>
		        		<td class="col-md-8"><%= link_to highlight(ordinance.title, params[:search]), ordinance_path(ordinance) %></td>
		        		<td><%= ordinance.date_approved %></td>
		        	</tr>
		        <% end %>
	        </tbody>
	      </table>
	      <center><%= paginate @ordinances, :window => 1 %></center>
      </div>
    </div>
	</div>
</div>